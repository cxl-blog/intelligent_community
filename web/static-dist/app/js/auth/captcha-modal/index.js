webpackJsonp(["app/js/auth/captcha-modal/index"],{"601020d4b7c53037d8f9":function(t,a,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,e,n){return e&&t(a.prototype,e),n&&t(a,n),a}}(),c=e("0282bb17fb83bfbfed9b"),s=n(c),o=function(){function t(a,e,n,r){i(this,t),this.$element=a,this.dataTo=e,this.smsType=n,this.captchaNum=r,this.CaptchaValidator=null,this.init()}return r(t,[{key:"init",value:function(){var t=this;this.$element.on("click","#getcode_num",function(a){return t.changeCaptcha(a)}),$(".js-captcha-btn").click(function(a){return t.submitForm(a)}),this.initValidator()}},{key:"changeCaptcha",value:function(t){var a=$(t.currentTarget);a.attr("src",a.data("url")+"?"+Math.random())}},{key:"submitForm",value:function(){this.CaptchaValidator.form()&&this.$element.submit()}},{key:"initValidator",value:function(){var t=this;this._captchaValidated=!1,this.CaptchaValidator=this.$element.validate({onkeyup:!1,onfocusout:!1,rules:{captcha_num:{required:!0,alphanumeric:!0}},messages:{captcha_num:{required:Translator.trans("auth.mobile_captcha_required_error_hint")}},submitHandler:function(a){$.get(t.$element.attr("action"),{value:$("#captcha_num_modal").val()},function(a){if(a.success){t.$element.parents(".modal").modal("hide"),t._captchaValidated=!0;new s.default({element:".js-sms-send",url:$(".js-sms-send").data("smsUrl"),smsType:t.smsType,dataTo:t.dataTo,captchaNum:t.captchaNum,captcha:!0,captchaValidated:t._captchaValidated,preSmsSend:function(){var t=!0;return t}});$(".js-sms-send").off("click")}else t._captchaValidated=!1,t.$element.find("#getcode_num").attr("src",$("#getcode_num").data("url")+"?"+Math.random()),t.$element.find(".help-block").html('<span class="color-danger">'+Translator.trans("auth.mobile_captcha_error_hint")+"</span>"),t.$element.find(".help-block").show()},"json")}}),$("#captcha_num_modal").keydown(function(a){13==a.keyCode&&t.CaptchaValidator.form()})}}]),t}();a.default=o},0:function(t,a,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=e("601020d4b7c53037d8f9"),r=n(i),c="",s="",o="captcha_num";$('input[name="set_bind_emailOrMobile"]').length>0?(c="set_bind_emailOrMobile",s="sms_registration"):$('input[name="mobile"]').length>0?(c="mobile",s=$("#password-reset-by-mobile-form").length>0?"sms_forget_password":$("#settings-find-pay-password-form").length>0?"sms_forget_pay_password":"sms_bind"):(c=null==$('[name="verifiedMobile"]').val()?"emailOrMobile":"verifiedMobile",s="sms_registration"),$("#captcha-form").find("#getcode_num").attr("src",$("#getcode_num").data("url")+"?"+Math.random());new r.default($("#captcha-form"),c,s,o)}});